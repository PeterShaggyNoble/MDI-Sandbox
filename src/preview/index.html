<!DOCTYPE html>
<title>MDI Preview Generator</title>
<link href="../img/icon16.png" rel="shortcut icon">
<meta charset="utf-8">
<meta content="initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=0,width=device-width" name="viewport">
<meta name="robots" content="noodp">
<meta content="#512da8" name="theme-color">
<style>
	@viewport{initial-scale:1;maximum-scale:1;minimum-scale:1;user-scalable:0;width:device-width;}
	@font-face{
		font-family:Roboto;
		font-style:normal;
		font-weight:400;
		src:local("Roboto"),local("Roboto-Regular"),url(../fnt/roboto.woff2) format("woff2");
		unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2212,U+2215;
	}
	*,*::before,*::after{
		-webkit-appearance:none;
		appearance:none;
		background:none;
		background-clip:padding-box;
		border:0;
		border-radius:0;
		box-sizing:border-box;
		color:#212121;
		font-family:Roboto,arial,sans-serif;
		font-size:14px;
		-webkit-font-smoothing:antialiased;
		font-style:normal;
		font-weight:400;
		list-style:none;
		margin:0;
		outline:0;
		padding:0;
		-webkit-tap-highlight-color:rgba(0,0,0,0);
		text-align:left;
		text-decoration:none;
		text-indent:0;
		text-rendering:auto;
	}
	*>*,*::before,*::after{
		color:inherit;
		font-family:inherit;
		font-size:inherit;
	}
	*>*{
		font-style:inherit;
		font-weight:inherit;
	}
	body{
		align-items:center;
		background:#e0e0e0;
		display:flex;
		min-height:100vh;
		padding:8px;
		justify-content:center;
	}
	section{
		background:#fff;
		border-radius:2px;
		box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);
		display:flex;
		flex-wrap:wrap;
		padding:0 16px 16px;
		width:357px;
	}
	@media(max-width:373px){
		body{
			padding:0;
		}
		section{
			min-width:100%;
		}
	}
	h1{
		background:#512da8;
		border-radius:2px 2px 0 0;
		color:#fff;
		font-size:20px;
		font-weight:normal;
		line-height:48px;
		padding:0 16px;
		position:sticky;
		margin:0 -16px 8px;
		top:0;
		width:calc(100% + 32px);
		z-index:2;
	}
	label{
		color:#757575;
		cursor:pointer;
		display:inline-block;
		line-height:20px;
		margin:8px 0;
		width:75px;
	}
	input,select{
		border-bottom:1px solid #bdbdbd;
		line-height:23px;
		margin:0 0 8px;
		transition:border .195s cubic-bezier(.4,0,.2,1);
	}
	input,select{
		display:inline-block;
		height:24px;
		width:calc(100% - 75px);
	}
	input{
		padding:0 4px;
	}
	select{
		background:url('data:image/svg+xml;utf8,<svg fill="#757575" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7,10L12,15L17,10H7Z"/></svg>') right -2px no-repeat;
		padding:0 24px 0 4px;
	}
	option:checked{
		display:none;
	}
	input:focus,select:focus{
		border-color:#757575;
	}
	input:invalid{
		border-color:#f44336;
	}
	figure{
		background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUUAAAEmBAMAAAAHOp+aAAAAKlBMVEX////u7u739/f6+vrx8fHi4uLd3d39/f329vbPz8/f39/09PTp6enY2NjMrDZ4AAACXUlEQVR42u3asUsCURzAcTPBwUXBwaEhHFJoCRze4FJgS3OOLQ3RKN3wXHXI4P6CxqApGkQXB5dWb+7/iQOFd3coN0jv9+59v0VwtHx4b/jpu1ciIqIDabPMP4OelVRCUg26b7umapQkVoNwYKVVQqLPjYeyThn7pbj6//9ZmsZgbjzUVMo4sWVsmcaXa+Oh0kkaT9e2jNGVwRjXjYeTWcp4a8t4jxEjRq+NDUsVbR0xYsSIESNzpvB7nfrOJdIYrIdfu4aREmnUlzeNXc2FFmmMz1LC7c9UjUQaU2dSMo2JMB7JKHLOOLGOel9yjOY5rtlUjcQYt+e42cpajDGY7zHWlBjj9jNFtkpHjHFc32M8mWH0y9iwVNHWESNGjBgxMmd832uMGDFiZM64u44YMWLEiJE54/teY8SIEaO3c8aFd5rmPSmzYSTn3bB5T8qsuZDzjj2+q7AKs7+S7iq4cOfDibszGDFy38y3vcaIESNG5oy764gRI0aMGJkzvu81RowYMTJn3F1HjBgxYsTInPF9rzFixIiROePuOmLEiBEjRuaM73uNESNGjMwZd9cRI0aMGDEyZ3zfa4wYMWJkzri7jhgxYsSIkTnj+15jxIgRI3PG3XXEiBEjRozMGd/3GiNGjBiZM+6uI0aMGDFiZM74vtcYMWIsnHFtyxjlNlYnD+9W+m2Nchv7Z0Mr/SzzG4NwYKWVio350kHPSkqXiIjoYHdPovuMjR/TtuQ2sfG5LbqL2PjYFh1GjJLCiFFSGDFKCiNGSWHEKCmMGCWF8Ti9xsZv0WdS3Y0jZ3t/niRZx+dg9dwAAAAASUVORK5CYII) no-repeat;
		height:294px;
		margin:0 auto;
		position:relative;
		width:325px;
	}
	canvas,p,span,svg{
		position:absolute;
	}
	canvas,span,svg{
		left:0;
		top:0;
	}
	.hide,canvas{
		opacity:0;
	}
	span{
		background:#757575;
		bottom:0;
		mix-blend-mode:overlay;
		right:0;
		transition:background .195s cubic-bezier(.4,0,.2,1),opacity .195s cubic-bezier(.4,0,.2,1);
	}
	p{
		color:#757575;
	}
	p+p{
		transform:rotate(-90deg);
		transform-origin:0 0;
		transition:color .195s cubic-bezier(.4,0,.2,1),opacity .195s cubic-bezier(.4,0,.2,1);
	}
	p:first-of-type{
		left:11px;
		top:269px;
		transition:color .195s cubic-bezier(.4,0,.2,1);
	}
	p:nth-of-type(2){
		font-size:18px;
		left:11px;
		top:250px;
	}
	p:last-of-type{
		left:41px;
		top:250px;
	}
	path{
		transition:fill .195s cubic-bezier(.4,0,.2,1),fill-opacity .195s cubic-bezier(.4,0,.2,1);
	}
	button{
		background:#512da8;
		border-radius:2px;
		box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);
		color:#fff;
		cursor:pointer;
		font-weight:500;
		line-height:36px;
		margin:16px 0 0 auto;
		padding:0 16px;
		text-align:center;
		text-transform:uppercase;
	}
</style>
<section>
	<h1>MDI Preview Generator</h1>
	<label for="canvas">Canvas</label><select id="canvas">
		<option value="000">Black</option>
		<option value="2196f3">Blue</option>
		<option value="607d8b">Blue Grey</option>
		<option value="795548">Brown</option>
		<option value="ff5722">Deep Orange</option>
		<option value="673ab7">Deep Purple</option>
		<option value="4caf50">Green</option>
		<option selected value="757575">Grey</option>
		<option value="3f51b5">Indigo</option>
		<option value="ff9800">Orange</option>
		<option value="e91e63">Pink</option>
		<option value="9c27b0">Purple</option>
		<option value="f44336">Red</option>
		<option value="009688">Teal</option>
	</select>
	<label for="data">Path</label><input id="data" required spellcheck="false" type="text" value="M2,2H8V4H16V2H22V8H20V16H22V22H16V20H8V22H2V16H4V8H2V2M16,8V6H8V8H6V16H8V18H16V16H18V8H16M4,4V6H6V4H4M18,4V6H20V4H18M4,18V20H6V18H4M18,18V20H20V18H18Z">
	<label for="overlay">Overlay</label><input id="overlay" spellcheck="false" type="text" value="">
	<label for="colour">Colour</label><select id="colour">
		<option value="000">Black</option>
		<option value="2962ff">Blue</option>
		<option value="795548">Brown</option>
		<option value="dd2c00">Deep Orange</option>
		<option value="6200ea">Deep Purple</option>
		<option value="00c853">Green</option>
		<option value="304ffe">Indigo</option>
		<option value="ff6d00">Orange</option>
		<option value="c51162">Pink</option>
		<option value="a0f">Purple</option>
		<option selected value="d50000">Red</option>
		<option value="00bfa5">Teal</option>
	</select>
	<label for="name">Name</label><input id="name" required type="text" value="vector-square">
	<label for="action">Icon</label><select id="action">
		<option selected value="">None</option>
		<option value="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z">Download</option>
		<option value="M16,6H13V7.9H16C18.26,7.9 20.1,9.73 20.1,12A4.1,4.1 0 0,1 16,16.1H13V18H16A6,6 0 0,0 22,12C22,8.68 19.31,6 16,6M3.9,12C3.9,9.73 5.74,7.9 8,7.9H11V6H8A6,6 0 0,0 2,12A6,6 0 0,0 8,18H11V16.1H8C5.74,16.1 3.9,14.26 3.9,12M8,13H16V11H8V13Z">Link</option>
		<option value="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z">External Link</option>
		<option value="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z">Image</option>
	</select>
	<label for="type">Type</label><select id="type">
		<option value="">Standard</option>
		<option data-disclaimer="Unreleased Draft" selected value="Work in Progress">Work in Progress</option>
		<option data-disclaimer="Not Yet Available" value="Final Draft">Final Draft</option>
		<option data-disclaimer="Not Yet Available" value="Stock Icon">Stock Icon</option>
		<option data-disclaimer="Not for release" value="Comparison">Comparison</option>
		<option data-disclaimer="Not included in font" value="Vector Only">Vector Only</option>
	</select>
	<figure>
		<figcaption>
			<span class="hide"></span>
			<p>vector-square</p>
			<p>Work in Progress</p>
			<p>Unreleased Draft</p>
		</figcaption>
		<svg height="294" viewBox="0 0 325 294" width="325">
			<defs>
				<path d="M2,2H8V4H16V2H22V8H20V16H22V22H16V20H8V22H2V16H4V8H2V2M16,8V6H8V8H6V16H8V18H16V16H18V8H16M4,4V6H6V4H4M18,4V6H20V4H18M4,18V20H6V18H4M18,18V20H20V18H18Z" fill="#757575" id="path" transform="translate(11,10)"/>
				<path d="" id="ghost" fill="#d50000" fill-opacity="0" transform="translate(11,10)"/>
			</defs>
			<use href="#path"/>
			<use href="#path" transform="translate(-11,24) scale(2,2)"/>
			<use href="#path" transform="translate(-40,-90) scale(10,10)"/>
			<use href="#ghost" transform="translate(-40,-90) scale(10,10)"/>
			<path d="" fill="#757575" fill-opacity="0" transform="translate(293,269) scale(.75,.75)"/>
		</svg>
		<canvas height="294" width="325"></canvas>
	</figure>
	<button>Save</button>
</section>
<script>
	(async _=>{
		const 	icons=await(await fetch`../json/icons.json`).json(),
			inputs={
				canvas:document.getElementById`canvas`,
				data:document.getElementById`data`,
				overlay:document.getElementById`overlay`,
				colour:document.getElementById`colour`,
				name:document.getElementById`name`,
				action:document.getElementById`action`,
				type:document.getElementById`type`
			},
			span=document.querySelector`span`,
			text={
				name:document.querySelector`p`,
				type:document.querySelector`p+p`,
				disclaimer:document.querySelector`p+p+p`,
			},
			svg=document.querySelector`svg`,
			path=document.getElementById`path`,
			ghost=document.getElementById`ghost`,
			icon=svg.lastElementChild,
			canvas=document.querySelector`canvas`,
			context=canvas.getContext`2d`,
			width=canvas.width,
			height=canvas.height,
			button=document.querySelector`button`,
			a=document.createElement`a`,
			background=new Image,
			xml=new XMLSerializer,
			image=new Image,
			generate=event=>{
				clearTimeout(timer);
				timer=setTimeout(_=>{
					target=event.target;
					value=target.value;
					delay=0;
					switch(target){
						case inputs.canvas:
							path.setAttribute(`fill`,context.fillStyle=`#`+value);
							icon.setAttribute(`fill`,span.style.background=`#`+value);
							span.classList.toggle(`hide`,value===`757575`);
							for(key in text)
								if(text.hasOwnProperty(key))
									text[key].style.color=`#`+value;
							delay=200;
							break;
						case inputs.data:
							path.setAttribute(`d`,value);
							if(value){
								size=Math.max(...value.match(/(\d|\.)+/g).map(x=>parseFloat(x)));
								path.setAttribute(`transform`,size>24?size>48?`scale(.046875) scale(1,-1) translate(234.66667,-725.33333)`:`scale(.5) translate(22,20)`:`translate(11,10)`);
								for(key in icons)
									if(icons.hasOwnProperty(key))
										if(icons[key].data.regular===value||icons[key].data.light===value){
											inputs.name.value=key;
											inputs.name.dispatchEvent(new Event(`input`));
											break;
										}
							}
							break;
						case inputs.overlay:
							ghost.setAttribute(`fill-opacity`,value?`.4375`:`0`);
							delay=value?0:200;
							if(value){
								size=Math.max(...value.match(/(\d|\.)+/g).map(x=>parseFloat(x)));
								ghost.setAttribute(`transform`,size>24?size>48?`scale(.046875) scale(1,-1) translate(234.66667,-725.33333)`:`scale(.5) translate(22,20)`:`translate(11,10)`);
							}
							break;
						case inputs.colour:
							ghost.setAttribute(`fill`,`#`+value);
							delay=200;
							break;
						case inputs.name:
							text.name.firstChild.nodeValue=value.trim().toLowerCase().replace(/ |_/g,`-`);
							break;
						case inputs.action:
							value&&icon.setAttribute(`d`,value);
							icon.setAttribute(`fill-opacity`,value?1:0);
							delay=200;
							break;
						case inputs.type:
							if(value){
								text.type.firstChild.nodeValue=value;
								text.disclaimer.firstChild.nodeValue=target.options[target.selectedIndex].dataset.disclaimer;
							}
							delay=value?0:200;
							text.type.classList.toggle(`hide`,!target.value);
							text.disclaimer.classList.toggle(`hide`,!target.value);
					}
					timer=setTimeout(_=>{
						target===inputs.overlay&&ghost.setAttribute(`d`,value);
						image.src=URL.createObjectURL(new Blob([xml.serializeToString(svg)],{type:`image/svg+xml;charset=utf-8`}))
					},delay);
				},50);
			};
		let delay,key,size,target,timer,value;
		context.font=`14px Roboto`;
		context.fillStyle=`#`+inputs.canvas.value;
		background.src=`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUUAAAEmBAMAAAAHOp+aAAAAKlBMVEX////u7u739/f6+vrx8fHi4uLd3d39/f329vbPz8/f39/09PTp6enY2NjMrDZ4AAACXUlEQVR42u3asUsCURzAcTPBwUXBwaEhHFJoCRze4FJgS3OOLQ3RKN3wXHXI4P6CxqApGkQXB5dWb+7/iQOFd3coN0jv9+59v0VwtHx4b/jpu1ciIqIDabPMP4OelVRCUg26b7umapQkVoNwYKVVQqLPjYeyThn7pbj6//9ZmsZgbjzUVMo4sWVsmcaXa+Oh0kkaT9e2jNGVwRjXjYeTWcp4a8t4jxEjRq+NDUsVbR0xYsSIESNzpvB7nfrOJdIYrIdfu4aREmnUlzeNXc2FFmmMz1LC7c9UjUQaU2dSMo2JMB7JKHLOOLGOel9yjOY5rtlUjcQYt+e42cpajDGY7zHWlBjj9jNFtkpHjHFc32M8mWH0y9iwVNHWESNGjBgxMmd832uMGDFiZM64u44YMWLEiJE54/teY8SIEaO3c8aFd5rmPSmzYSTn3bB5T8qsuZDzjj2+q7AKs7+S7iq4cOfDibszGDFy38y3vcaIESNG5oy764gRI0aMGJkzvu81RowYMTJn3F1HjBgxYsTInPF9rzFixIiROePuOmLEiBEjRuaM73uNESNGjMwZd9cRI0aMGDEyZ3zfa4wYMWJkzri7jhgxYsSIkTnj+15jxIgRI3PG3XXEiBEjRozMGd/3GiNGjBiZM+6uI0aMGDFiZM74vtcYMWIsnHFtyxjlNlYnD+9W+m2Nchv7Z0Mr/SzzG4NwYKWVio350kHPSkqXiIjoYHdPovuMjR/TtuQ2sfG5LbqL2PjYFh1GjJLCiFFSGDFKCiNGSWHEKCmMGCWF8Ti9xsZv0WdS3Y0jZ3t/niRZx+dg9dwAAAAASUVORK5CYII`;
		image.addEventListener(`load`,_=>{
			context.clearRect(0,0,width,height);
			context.drawImage(background,0,0);
			if(inputs.canvas.value!==`757575`){
				context.globalCompositeOperation=`overlay`;
				context.fillRect(0,0,width,height);
				context.globalCompositeOperation=`source-over`;
			}
			if(inputs.type.value){
				context.save();
				context.font=`18px Roboto`;
				context.translate(28,250);
				context.rotate(-Math.PI/2);
				context.fillText(text.type.firstChild.nodeValue,0,0);
				context.restore();
				context.save();
				context.globalAlpha=.87;
				context.translate(54,250);
				context.rotate(-Math.PI/2);
				context.fillText(text.disclaimer.firstChild.nodeValue,0,0);
				context.restore();
			}
			context.fillText(inputs.name.value.trim().toLowerCase().replace(/ |_/g,`-`),11,282);
			context.drawImage(image,0,0);
			URL.revokeObjectURL(image.src);
		},0);
		button.addEventListener(`click`,_=>{
			canvas.toBlob(blob=>{
				a.href=URL.createObjectURL(blob);
				a.download=text.name.firstChild.nodeValue+`.png`;
				a.click();
				URL.revokeObjectURL(a.href);
			});
			URL.revokeObjectURL(image.src);
		},0);
		document.addEventListener(`input`,generate,1);
		await new Promise(resolve=>{
			let script=document.createElement`script`;
			script.async=1;
			script.src=`https://www.googletagmanager.com/gtag/js?id=UA-109147935-1`;
			document.body.append(script);
			script.addEventListener(`load`,resolve,0);
		});
		window.dataLayer=window.dataLayer||[];
		let gtag=function(){window.dataLayer.push(arguments);};
		gtag(`js`,new Date());
		gtag(`config`,`UA-109147935-1`);
	})();
</script>